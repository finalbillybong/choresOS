import{u as N,r,b as v,j as e,T as p,A as f}from"./index-DbTTv7ag.js";import{L as b}from"./loader-circle-Bxpi28eJ.js";import{m as g}from"./proxy-B1EfiGkW.js";const w=["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"];function z(){const{user:a}=N(),[t,u]=r.useState([]),[c,m]=r.useState(!0),[x,h]=r.useState("");r.useEffect(()=>{(async()=>{m(!0),h("");try{const s=await v("/api/stats/leaderboard");u(s.leaderboard||s||[])}catch(s){h(s.message||"Failed to load leaderboard")}finally{m(!1)}})()},[]);const n=t.length>0?Math.max(...t.map(s=>s.weekly_xp||s.xp||0),1):1;return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(p,{size:28,className:"text-gold"}),e.jsx("h1",{className:"font-heading text-gold text-xs sm:text-sm leading-relaxed",children:"Hall of Fame"})]}),x&&e.jsx("div",{className:"mb-4 p-3 rounded border-2 border-crimson/40 bg-crimson/10 text-crimson text-base text-center",children:x}),c&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(b,{size:32,className:"text-gold animate-spin"})}),!c&&!x&&t.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(p,{size:48,className:"text-cream/10 mx-auto mb-4"}),e.jsx("p",{className:"font-heading text-cream/30 text-[10px]",children:"No XP earned this week yet"}),e.jsx("p",{className:"text-cream/20 font-body text-base mt-2",children:"Start questing!"})]}),!c&&t.length>0&&e.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map((s,i)=>{const l=s.weekly_xp||s.xp||0,d=n>0?l/n*100:0,o=s.user_id===(a==null?void 0:a.id)||s.id===(a==null?void 0:a.id);return e.jsxs("div",{className:`game-panel p-4 flex items-center gap-4 ${o?"!border-gold":""}`,children:[e.jsx("div",{className:"flex-shrink-0 w-12 text-center",children:e.jsx("span",{className:"text-2xl",children:w[i]})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(f,{config:s.avatar_config,size:"md",name:s.display_name||s.username})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-heading text-cream text-[10px] truncate mb-2",children:s.display_name||s.username}),e.jsxs("div",{className:"relative h-5 bg-[#2a2a4a] rounded-full overflow-hidden",children:[e.jsx(g.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-gold to-gold/70 rounded-full",initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,delay:i*.15,ease:"easeOut"}}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-navy font-heading text-[8px] z-10",children:[l," XP"]})]})]})]},s.user_id||s.id||i)}),t.length>3&&e.jsx("div",{className:"mt-6 space-y-2",children:t.slice(3).map((s,i)=>{const l=i+4,d=s.weekly_xp||s.xp||0,o=n>0?d/n*100:0,j=s.user_id===(a==null?void 0:a.id)||s.id===(a==null?void 0:a.id);return e.jsxs("div",{className:`game-panel p-3 flex items-center gap-3 ${j?"!border-gold":""}`,children:[e.jsx("div",{className:"flex-shrink-0 w-8 text-center",children:e.jsxs("span",{className:"font-heading text-cream/50 text-[10px]",children:["#",l]})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(f,{config:s.avatar_config,size:"sm",name:s.display_name||s.username})}),e.jsx("p",{className:"font-body text-cream text-lg truncate flex-shrink min-w-0",children:s.display_name||s.username}),e.jsx("div",{className:"flex-1 min-w-0 ml-auto max-w-[200px]",children:e.jsx("div",{className:"relative h-4 bg-[#2a2a4a] rounded-full overflow-hidden",children:e.jsx(g.div,{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-gold/80 to-gold/50 rounded-full",initial:{width:0},animate:{width:`${o}%`},transition:{duration:.8,delay:(i+3)*.1,ease:"easeOut"}})})}),e.jsxs("span",{className:"flex-shrink-0 font-heading text-gold text-[9px] min-w-[60px] text-right",children:[d," XP"]})]},s.user_id||s.id||l)})})]})]})}export{z as default};
