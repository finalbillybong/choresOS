import{u as w,r as c,b as k,j as e,d as _,A as u,S as E}from"./index-DSya55XC.js";import{T as j}from"./trophy-DZNshmNj.js";import{F as z}from"./flame-B4X-oAKr.js";import{m as f}from"./proxy-yIyKbpHm.js";const S=["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"];function A(){const{user:a}=w(),[t,N]=c.useState([]),[o,v]=c.useState(!0),[p,b]=c.useState(""),r=c.useCallback(async()=>{try{const s=await k("/api/stats/leaderboard");N(s.leaderboard||s||[])}catch(s){b(s.message||"Failed to load leaderboard")}},[]);c.useEffect(()=>{r().finally(()=>v(!1))},[r]),c.useEffect(()=>{const s=()=>{r()};return window.addEventListener("ws:message",s),()=>window.removeEventListener("ws:message",s)},[r]);const m=t.length>0?Math.max(...t.map(s=>s.weekly_xp||s.xp||0),1):1;return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(j,{size:28,className:"text-sky"}),e.jsx("h1",{className:"text-cream text-xl font-extrabold",children:"Hall of Fame"})]}),p&&e.jsx("div",{className:"mb-4 p-3 rounded border-2 border-crimson/40 bg-crimson/10 text-crimson text-sm text-center",children:p}),o&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(_,{size:32,className:"text-sky animate-spin"})}),!o&&!p&&t.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(j,{size:48,className:"text-cream/10 mx-auto mb-4"}),e.jsx("p",{className:"text-cream text-lg font-bold",children:"No XP earned this week yet"}),e.jsx("p",{className:"text-muted text-sm mt-2",children:"Start questing!"})]}),!o&&t.length>0&&e.jsxs("div",{className:"space-y-3",children:[t.slice(0,3).map((s,i)=>{const n=s.weekly_xp||s.xp||0,d=m>0?n/m*100:0,h=s.user_id===(a==null?void 0:a.id)||s.id===(a==null?void 0:a.id),x=s.quests_completed||0,l=s.current_streak||0,g=s.total_xp||0;return e.jsxs("div",{className:`game-panel p-4 flex items-center gap-4 ${h?"!border-sky":""}`,children:[e.jsx("div",{className:"flex-shrink-0 w-12 text-center",children:e.jsx("span",{className:"text-2xl",children:S[i]})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(u,{config:s.avatar_config,size:"md",name:s.display_name||s.username})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-cream text-sm font-bold truncate mb-1",children:s.display_name||s.username}),e.jsxs("div",{className:"flex items-center gap-3 mb-2 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1 text-muted",children:[e.jsx(E,{size:12,className:"text-sky"}),x," quest",x!==1?"s":""]}),l>0&&e.jsxs("span",{className:"flex items-center gap-1 text-muted",children:[e.jsx(z,{size:12,className:"text-orange-400"}),l," day",l!==1?"s":""]}),e.jsxs("span",{className:"text-muted/60",children:[g," total XP"]})]}),e.jsxs("div",{className:"xp-bar !h-5",children:[e.jsx(f.div,{className:"xp-bar-fill",initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,delay:i*.15,ease:"easeOut"}}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-navy font-medium text-xs z-10",children:[n," XP this week"]})]})]})]},s.user_id||s.id||i)}),t.length>3&&e.jsx("div",{className:"mt-6 space-y-2",children:t.slice(3).map((s,i)=>{const n=i+4,d=s.weekly_xp||s.xp||0,h=m>0?d/m*100:0,x=s.user_id===(a==null?void 0:a.id)||s.id===(a==null?void 0:a.id),l=s.quests_completed||0;return e.jsxs("div",{className:`game-panel p-3 flex items-center gap-3 ${x?"!border-sky":""}`,children:[e.jsx("div",{className:"flex-shrink-0 w-8 text-center",children:e.jsxs("span",{className:"text-muted text-sm font-bold",children:["#",n]})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(u,{config:s.avatar_config,size:"sm",name:s.display_name||s.username})}),e.jsxs("div",{className:"min-w-0 flex-shrink",children:[e.jsx("p",{className:"text-cream text-sm truncate",children:s.display_name||s.username}),e.jsxs("p",{className:"text-muted text-xs",children:[l," quest",l!==1?"s":""," done"]})]}),e.jsx("div",{className:"flex-1 min-w-0 hidden sm:block",children:e.jsx("div",{className:"xp-bar !h-4",children:e.jsx(f.div,{className:"xp-bar-fill",initial:{width:0},animate:{width:`${h}%`},transition:{duration:.8,delay:(i+3)*.1,ease:"easeOut"}})})}),e.jsxs("span",{className:"flex-shrink-0 font-medium text-sky text-xs text-right ml-auto",children:[d," XP"]})]},s.user_id||s.id||n)})})]})]})}export{A as default};
