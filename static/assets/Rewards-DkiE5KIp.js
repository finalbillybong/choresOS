import{u as Z,r as a,b as w,j as e,d as te,G as ee,h as oe,a as de,i as me,e as xe}from"./index-DSya55XC.js";import{M as V}from"./Modal-CTgoPZNF.js";import{P as G,E as ue,S as J,C as H}from"./shopping-bag-D5C13LpU.js";import{C as pe}from"./clock-CgK8jBqw.js";import{S as I}from"./star-CZhdvWR8.js";import{P as Q}from"./plus-BhPmw41X.js";import{C as he}from"./check-KCg3fZoI.js";import{T as ae}from"./trash-2-eZb7njjg.js";import{P as ge}from"./pencil-DDPlFbw7.js";import"./index-CK5Gv4bL.js";import"./proxy-yIyKbpHm.js";function fe(){const{user:m}=Z(),l=(m==null?void 0:m.role)==="kid",[i,C]=a.useState([]),[x,u]=a.useState(!0),[b,j]=a.useState(""),[_,P]=a.useState(null),y=a.useCallback(async()=>{u(!0),j("");try{const n=await w("/api/rewards/redemptions");C(n)}catch(n){j(n.message||"Failed to load inventory")}finally{u(!1)}},[]);a.useEffect(()=>{y()},[y]),a.useEffect(()=>{const n=()=>{y()};return window.addEventListener("ws:message",n),()=>window.removeEventListener("ws:message",n)},[y]);const A=async n=>{P(n.id);try{await w(`/api/rewards/redemptions/${n.id}/fulfill`,{method:"POST"}),await y()}catch(r){j(r.message||"Could not mark as given")}finally{P(null)}},h=i.filter(n=>n.status==="approved"),g=i.filter(n=>n.status==="pending"),L=n=>{var o,c;const r={};for(const p of n){const N=((o=p.user)==null?void 0:o.display_name)||((c=p.user)==null?void 0:c.username)||`Kid #${p.user_id}`;r[N]||(r[N]=[]),r[N].push(p)}return Object.entries(r).sort(([p],[N])=>p.localeCompare(N))};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(G,{size:28,className:"text-sky"}),e.jsx("h1",{className:"text-cream text-xl font-extrabold leading-relaxed",children:l?"My Inventory":"Reward Inventory"})]}),b&&e.jsx("div",{className:"mb-4 p-3 rounded border-2 border-crimson/40 bg-crimson/10 text-crimson text-sm text-center",children:b}),x&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(te,{size:32,className:"text-sky animate-spin"})}),!x&&e.jsxs(e.Fragment,{children:[h.length===0&&g.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(G,{size:48,className:"text-muted mx-auto mb-4"}),e.jsx("p",{className:"text-cream text-lg font-bold",children:l?"No loot yet!":"No claimed rewards"}),e.jsx("p",{className:"text-muted text-sm mt-2",children:l?"Complete quests, earn XP, and redeem rewards to fill your inventory.":"When kids redeem rewards, they'll appear here."})]}),l&&(h.length>0||g.length>0)&&e.jsxs("div",{className:"space-y-6",children:[h.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted text-[11px] font-semibold uppercase tracking-widest mb-3",children:"Ready to collect"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.map(n=>e.jsx(Y,{redemption:n,status:"approved"},n.id))})]}),g.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted text-[11px] font-semibold uppercase tracking-widest mb-3",children:"Awaiting approval"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:g.map(n=>e.jsx(Y,{redemption:n,status:"pending"},n.id))})]})]}),!l&&(h.length>0||g.length>0)&&e.jsxs("div",{className:"space-y-6",children:[h.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted text-[11px] font-semibold uppercase tracking-widest mb-3",children:"Waiting to be given out"}),L(h).map(([n,r])=>e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"text-cream text-sm font-bold mb-2",children:n}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.map(o=>e.jsx(Y,{redemption:o,status:"approved",showFulfill:!0,onFulfill:()=>A(o),fulfilling:_===o.id},o.id))})]},n))]}),g.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted text-[11px] font-semibold uppercase tracking-widest mb-3",children:"Pending approval"}),L(g).map(([n,r])=>e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"text-cream text-sm font-bold mb-2",children:n}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.map(o=>e.jsx(Y,{redemption:o,status:"pending"},o.id))})]},n))]})]})]})]})}function Y({redemption:m,status:l,showFulfill:i,onFulfill:C,fulfilling:x}){const u=m.reward,b=(u==null?void 0:u.icon)||"ðŸŽ";return e.jsxs("div",{className:`game-panel !border-2 p-4 flex items-center gap-3 ${l==="approved"?"border-emerald/40 bg-emerald/5":"border-border bg-surface-raised/30"}`,children:[e.jsx("div",{className:"text-2xl flex-shrink-0",children:b}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-cream text-sm font-bold truncate",children:(u==null?void 0:u.title)||"Reward"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l==="approved"?e.jsxs("span",{className:"flex items-center gap-1 text-emerald text-xs",children:[e.jsx(ee,{size:12})," Approved"]}):e.jsxs("span",{className:"flex items-center gap-1 text-muted text-xs",children:[e.jsx(pe,{size:12})," Pending"]}),e.jsxs("span",{className:"text-muted text-xs",children:[m.points_spent," XP"]})]}),m.created_at&&e.jsxs("p",{className:"text-muted/60 text-[10px] mt-1",children:["Claimed ",new Date(m.created_at).toLocaleDateString()]})]}),i&&e.jsxs("button",{onClick:C,disabled:x,className:"game-btn game-btn-blue flex items-center gap-1 text-xs !py-1.5 !px-3 flex-shrink-0",title:"Mark as given out",children:[e.jsx(oe,{size:14}),x?"...":"Given"]})]})}function be(){const{user:m}=Z(),l=(m==null?void 0:m.role)==="kid",[i,C]=a.useState([]),[x,u]=a.useState(!0),[b,j]=a.useState(""),[_,P]=a.useState(!1),[y,A]=a.useState(""),[h,g]=a.useState(""),[L,n]=a.useState(""),[r,o]=a.useState(!1),[c,p]=a.useState(!1),[N,T]=a.useState(null),[$,M]=a.useState(""),[z,R]=a.useState(!1),[W,F]=a.useState(""),S=a.useCallback(async()=>{u(!0),j("");try{const t=await w("/api/wishlist");C(t.items||t||[])}catch(t){j(t.message||"Failed to load wishlist")}finally{u(!1)}},[]);a.useEffect(()=>{S()},[S]),a.useEffect(()=>{const t=()=>{S()};return window.addEventListener("ws:message",t),()=>window.removeEventListener("ws:message",t)},[S]);const B=async()=>{if(y.trim()){o(!0);try{const t={title:y.trim()};h.trim()&&(t.url=h.trim()),L.trim()&&(t.notes=L.trim()),await w("/api/wishlist",{method:"POST",body:t}),A(""),g(""),n(""),P(!1),S()}catch(t){j(t.message||"Failed to add item")}finally{o(!1)}}},E=async t=>{try{await w(`/api/wishlist/${t}`,{method:"DELETE"}),C(d=>d.filter(k=>k.id!==t))}catch(d){j(d.message||"Failed to delete item")}},D=t=>{T(t),M(""),F(""),p(!0)},U=async()=>{const t=parseInt($,10);if(!t||t<=0){F("Enter a valid point cost");return}R(!0),F("");try{await w(`/api/wishlist/${N.id}/convert`,{method:"POST",body:{point_cost:t}}),p(!1),S()}catch(d){F(d.message||"Conversion failed")}finally{R(!1)}},v={};l||i.forEach(t=>{const d=t.user_display_name||t.username||t.user_id||"Unknown Hero";v[d]||(v[d]=[]),v[d].push(t)});const X=(t,d=!1,k=!1)=>{const O=!!t.converted_to_reward_id;return e.jsxs("div",{className:`game-panel p-4 flex items-start gap-3 ${O?"!border-emerald/40":""}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:O?e.jsx(he,{size:18,className:"text-emerald"}):e.jsx(I,{size:18,className:"text-sky"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-cream text-sm leading-tight",children:t.title}),t.url&&e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky text-xs flex items-center gap-1 mt-1 hover:text-sky/80 transition-colors",children:[e.jsx(ue,{size:12}),e.jsx("span",{className:"truncate",children:t.url})]}),t.notes&&e.jsx("p",{className:"text-muted text-xs mt-1",children:t.notes}),O&&e.jsx("span",{className:"inline-block mt-1 text-emerald text-xs font-medium",children:"Converted to Reward"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[k&&!O&&e.jsx("button",{onClick:()=>D(t),className:"game-btn game-btn-purple !py-2 !px-3 !text-[8px]",title:"Convert to Reward",children:e.jsx(ee,{size:14})}),d&&e.jsx("button",{onClick:()=>E(t.id),className:"p-2 rounded hover:bg-crimson/10 text-crimson/60 hover:text-crimson transition-colors",title:"Delete",children:e.jsx(ae,{size:16})})]})]},t.id)};return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{size:28,className:"text-sky"}),e.jsx("h1",{className:"text-cream text-xl font-extrabold leading-relaxed",children:"Wish List"})]}),l&&e.jsxs("button",{onClick:()=>P(!_),className:"game-btn game-btn-blue flex items-center gap-2",children:[e.jsx(Q,{size:14}),"Add Wish"]})]}),b&&e.jsx("div",{className:"mb-4 p-3 rounded border-2 border-crimson/40 bg-crimson/10 text-crimson text-sm text-center",children:b}),l&&_&&e.jsxs("div",{className:"game-panel p-5 mb-6 space-y-3",children:[e.jsx("h3",{className:"text-cream text-lg font-bold tracking-wide mb-3",children:"New Wish"}),e.jsx("input",{type:"text",value:y,onChange:t=>A(t.target.value),placeholder:"What do you wish for?",className:"field-input"}),e.jsx("input",{type:"url",value:h,onChange:t=>g(t.target.value),placeholder:"Link (optional)",className:"field-input"}),e.jsx("textarea",{value:L,onChange:t=>n(t.target.value),placeholder:"Notes (optional)",rows:2,className:"field-input resize-none"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>P(!1),className:"game-btn game-btn-red",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:r||!y.trim(),className:"game-btn game-btn-blue",children:r?"Adding...":"Add Wish"})]})]}),x&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(te,{size:32,className:"text-sky animate-spin"})}),!x&&l&&e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(I,{size:48,className:"text-muted mx-auto mb-4"}),e.jsx("p",{className:"text-cream text-lg font-bold",children:"Your wish list is empty"}),e.jsx("p",{className:"text-muted text-sm mt-2",children:"Every hero has dreams. Add your first wish!"})]}):i.map(t=>X(t,!0,!1))}),!x&&!l&&e.jsx("div",{className:"space-y-8",children:Object.keys(v).length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(I,{size:48,className:"text-muted mx-auto mb-4"}),e.jsx("p",{className:"text-cream text-lg font-bold",children:"No wishes yet"}),e.jsx("p",{className:"text-muted text-sm mt-2",children:"Your heroes haven't made any wishes yet. Encourage them to dream!"})]}):Object.entries(v).map(([t,d])=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-cream text-lg font-bold mb-3 tracking-wide flex items-center gap-2",children:[e.jsx(I,{size:14,className:"text-sky"}),t,"'s Wishes"]}),e.jsx("div",{className:"space-y-3",children:d.map(k=>X(k,!1,!0))})]},t))}),e.jsx(V,{isOpen:c,onClose:()=>p(!1),title:"Convert to Reward",actions:[{label:"Cancel",onClick:()=>p(!1),className:"game-btn game-btn-red"},{label:z?"Converting...":"Convert",onClick:U,className:"game-btn game-btn-gold",disabled:z}],children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-muted text-sm",children:["Convert"," ",e.jsx("span",{className:"text-cream font-bold",children:N==null?void 0:N.title})," ","into a redeemable reward:"]}),W&&e.jsx("div",{className:"p-2 rounded border border-crimson/40 bg-crimson/10 text-crimson text-sm",children:W}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gold text-sm font-medium mb-2 tracking-wide",children:"Point Cost (XP)"}),e.jsx("input",{type:"number",min:"1",value:$,onChange:t=>M(t.target.value),placeholder:"e.g. 500",className:"field-input"})]})]})})]})}const se={title:"",description:"",point_cost:50,icon:"",stock:""},je=[{key:"shop",label:"Shop",icon:J},{key:"inventory",label:"Inventory",icon:G},{key:"wishlist",label:"Wishlist",icon:I}];function Le(){de();const[m,l]=me(),{user:i,updateUser:C}=Z(),x=(i==null?void 0:i.role)==="parent"||(i==null?void 0:i.role)==="admin",u=(i==null?void 0:i.role)==="kid",b=m.get("tab")||"shop",j=s=>l(s==="shop"?{}:{tab:s},{replace:!0}),[_,P]=a.useState([]),[y,A]=a.useState(!0),[h,g]=a.useState(""),[L,n]=a.useState(!1),[r,o]=a.useState(null),[c,p]=a.useState({...se}),[N,T]=a.useState(""),[$,M]=a.useState(!1),[z,R]=a.useState(null),[W,F]=a.useState(!1),[S,B]=a.useState(null),[E,D]=a.useState(""),U=(i==null?void 0:i.points_balance)??0,v=a.useCallback(async()=>{try{g("");const s=await w("/api/rewards");P(Array.isArray(s)?s:s.rewards||s.items||[])}catch(s){g(s.message||"The treasure shop is temporarily closed.")}},[]);if(a.useEffect(()=>{v().finally(()=>A(!1))},[v]),a.useEffect(()=>{const s=()=>{v()};return window.addEventListener("ws:message",s),()=>window.removeEventListener("ws:message",s)},[v]),b==="inventory")return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx(q,{activeTab:b,setTab:j}),e.jsx(fe,{})]});if(b==="wishlist")return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx(q,{activeTab:b,setTab:j}),e.jsx(be,{})]});const X=()=>{o(null),p({...se}),T(""),n(!0)},t=s=>{o(s),p({title:s.title||"",description:s.description||"",point_cost:s.point_cost??s.cost??50,icon:s.icon||"",stock:s.stock!=null?String(s.stock):""}),T(""),n(!0)},d=()=>{n(!1),o(null),T("")},k=(s,f)=>{p(K=>({...K,[s]:f}))},O=async()=>{if(!c.title.trim()){T("Every treasure needs a name!");return}if(Number(c.point_cost)<1){T("The cost must be at least 1 XP.");return}M(!0),T("");const s={title:c.title.trim(),description:c.description.trim(),point_cost:Number(c.point_cost),icon:c.icon||void 0};c.stock!==""&&(s.stock=Number(c.stock));try{r?await w(`/api/rewards/${r.id}`,{method:"PUT",body:s}):await w("/api/rewards",{method:"POST",body:s}),d(),await v()}catch(f){T(f.message||"Could not save the treasure.")}finally{M(!1)}},ne=async()=>{if(z){F(!0);try{await w(`/api/rewards/${z.id}`,{method:"DELETE"}),R(null),await v()}catch(s){g(s.message||"Failed to remove the treasure.")}finally{F(!1)}}},ie=async s=>{B(s.id),D("");try{await w(`/api/rewards/${s.id}/redeem`,{method:"POST"});const f=s.point_cost??s.cost??0;C({points_balance:((i==null?void 0:i.points_balance)??0)-f}),D(`You claimed "${s.title}"! Check your inventory, hero!`),await v()}catch(f){D(f.message||"Redemption failed. The shopkeeper is confused.")}finally{B(null)}},le=s=>U>=(s.point_cost??s.cost??0),re=s=>s.stock!=null&&s.stock<=0;return y?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(J,{size:48,className:"text-sky animate-pulse"}),e.jsx("p",{className:"text-cream text-lg font-bold animate-pulse",children:"The shopkeeper is arranging the treasures..."})]}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx(q,{activeTab:b,setTab:j}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{size:28,className:"text-sky"}),e.jsx("h1",{className:"text-cream text-xl font-extrabold leading-relaxed",children:"Treasure Shop"})]}),x&&e.jsxs("button",{onClick:X,className:"game-btn game-btn-blue flex items-center gap-2",children:[e.jsx(Q,{size:16}),"Add Treasure"]})]}),u&&e.jsx("div",{className:"game-panel p-5",children:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gold/20 border-2 border-gold/40 flex items-center justify-center",children:e.jsx(H,{size:28,className:"text-gold"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-muted text-sm",children:"Your XP Balance"}),e.jsxs("p",{className:"text-gold text-xl font-extrabold",children:[U.toLocaleString()," XP"]})]})]})}),h&&e.jsx("div",{className:"p-3 rounded border-2 border-crimson/40 bg-crimson/10 text-crimson text-sm text-center",children:h}),E&&e.jsxs("div",{className:`p-3 rounded border-2 text-sm text-center ${E.toLowerCase().includes("fail")||E.toLowerCase().includes("confused")||E.toLowerCase().includes("insufficient")?"border-crimson/40 bg-crimson/10 text-crimson":"border-emerald/40 bg-emerald/10 text-emerald"}`,children:[E," ",!E.toLowerCase().includes("fail")&&!E.toLowerCase().includes("confused")&&!E.toLowerCase().includes("insufficient")&&e.jsx("button",{onClick:()=>j("inventory"),className:"underline font-bold hover:brightness-125 transition-all",children:"View Inventory"})]}),_.length===0?e.jsxs("div",{className:"game-panel p-10 text-center",children:[e.jsx(ee,{size:48,className:"mx-auto text-cream/20 mb-4"}),e.jsx("p",{className:"text-muted text-sm",children:"The treasure shop is empty. No loot to be found... yet!"}),x&&e.jsxs("button",{onClick:X,className:"game-btn game-btn-blue mt-4 inline-flex items-center gap-2",children:[e.jsx(Q,{size:16}),"Stock First Treasure"]})]}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:_.map(s=>{const f=re(s),K=le(s),ce=s.point_cost??s.cost??0;return e.jsxs("div",{className:`game-panel p-5 flex flex-col gap-3 relative ${f?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-sky/10 border border-sky/20 flex items-center justify-center flex-shrink-0",children:s.icon?e.jsx("span",{className:"text-2xl",children:s.icon}):e.jsx(xe,{size:22,className:"text-sky"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-cream text-lg font-bold leading-relaxed",children:s.title}),s.description&&e.jsx("p",{className:"text-muted text-sm mt-1 line-clamp-2",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{size:16,className:"text-gold"}),e.jsxs("span",{className:"text-gold text-sm font-bold",children:[ce," XP"]})]}),s.stock!=null&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(G,{size:14,className:f?"text-crimson":"text-muted"}),f?e.jsx("span",{className:"text-crimson text-xs font-bold",children:"Sold Out"}):e.jsxs("span",{className:"text-muted text-xs",children:[s.stock," left"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-auto pt-2",children:[u&&e.jsxs("button",{onClick:()=>ie(s),disabled:!K||f||S===s.id,className:`game-btn game-btn-gold flex-1 flex items-center justify-center gap-2 ${!K||f?"opacity-40 cursor-not-allowed":""} ${S===s.id?"opacity-60 cursor-wait":""}`,children:[e.jsx(H,{size:14}),S===s.id?"Claiming...":K?f?"Sold Out":"Redeem":"Not Enough XP"]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(s),className:"p-2 rounded hover:bg-surface-raised transition-colors text-muted hover:text-sky","aria-label":"Edit reward",children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>R(s),className:"p-2 rounded hover:bg-surface-raised transition-colors text-muted hover:text-crimson","aria-label":"Delete reward",children:e.jsx(ae,{size:16})})]})]})]},s.id)})}),e.jsx(V,{isOpen:L,onClose:d,title:r?"Edit Treasure":"New Treasure",actions:[{label:"Cancel",onClick:d,className:"game-btn game-btn-blue"},{label:$?"Saving...":r?"Update Treasure":"Add Treasure",onClick:O,className:"game-btn game-btn-gold",disabled:$}],children:e.jsxs("div",{className:"space-y-4",children:[N&&e.jsx("div",{className:"p-2 rounded border border-crimson/40 bg-crimson/10 text-crimson text-sm",children:N}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-cream text-sm font-medium mb-1 tracking-wide",children:"Treasure Name"}),e.jsx("input",{type:"text",value:c.title,onChange:s=>k("title",s.target.value),placeholder:"Extra Screen Time",className:"field-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-cream text-sm font-medium mb-1 tracking-wide",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:s=>k("description",s.target.value),placeholder:"What does this treasure grant?",rows:3,className:"field-input resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-cream text-sm font-medium mb-1 tracking-wide",children:"Cost (XP)"}),e.jsx("input",{type:"number",min:1,value:c.point_cost,onChange:s=>k("point_cost",s.target.value),className:"field-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-cream text-sm font-medium mb-1 tracking-wide",children:"Icon (Emoji)"}),e.jsx("input",{type:"text",value:c.icon,onChange:s=>k("icon",s.target.value),placeholder:"e.g. trophy, star, gift",className:"field-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-cream text-sm font-medium mb-1 tracking-wide",children:"Stock (Optional)"}),e.jsx("input",{type:"number",min:0,value:c.stock,onChange:s=>k("stock",s.target.value),placeholder:"Leave empty for unlimited",className:"field-input"}),e.jsx("p",{className:"text-muted text-xs mt-1",children:"Leave empty for unlimited supply."})]})]})}),e.jsx(V,{isOpen:!!z,onClose:()=>R(null),title:"Remove Treasure?",actions:[{label:"Keep Treasure",onClick:()=>R(null),className:"game-btn game-btn-blue"},{label:W?"Removing...":"Remove Treasure",onClick:ne,className:"game-btn game-btn-red",disabled:W}],children:e.jsxs("p",{className:"text-muted",children:["Are you sure you want to remove"," ",e.jsxs("span",{className:"text-gold font-bold",children:['"',z==null?void 0:z.title,'"']})," ","from the treasure shop? Heroes can no longer redeem this reward."]})})]})}function q({activeTab:m,setTab:l}){return e.jsx("div",{className:"flex gap-1 bg-surface-raised rounded-lg p-1",children:je.map(({key:i,label:C,icon:x})=>e.jsxs("button",{onClick:()=>l(i),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-3 rounded-md text-sm font-semibold transition-all ${m===i?"bg-sky/15 text-sky border border-sky/25":"text-muted hover:text-cream border border-transparent"}`,children:[e.jsx(x,{size:16}),e.jsx("span",{children:C})]},i))})}export{Le as default};
