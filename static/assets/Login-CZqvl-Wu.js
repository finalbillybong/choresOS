import{u as I,a as $,r as a,j as e,S as M,L as U}from"./index-DNIywqZZ.js";function q(){const{login:p,pinLogin:j}=I(),y=$(),[c,N]=a.useState(""),[d,v]=a.useState(""),[l,b]=a.useState(["","","","","",""]),[r,w]=a.useState(!1),[f,i]=a.useState(""),[u,h]=a.useState(!1),m=a.useRef([]),k=a.useCallback((s,t)=>{var n;t&&!/^\d$/.test(t)||(b(x=>{const o=[...x];return o[s]=t,o}),t&&s<5&&((n=m.current[s+1])==null||n.focus()))},[]),S=a.useCallback((s,t)=>{var n;t.key==="Backspace"&&!l[s]&&s>0&&((n=m.current[s-1])==null||n.focus())},[l]),P=a.useCallback(s=>{var o;s.preventDefault();const t=s.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!t)return;const n=t.split("");b(D=>{const g=[...D];return n.forEach((E,L)=>{g[L]=E}),g});const x=Math.min(n.length,5);(o=m.current[x])==null||o.focus()},[]),C=async s=>{if(s.preventDefault(),i(""),!c.trim()){i("Username is required");return}if(r){if(l.join("").length!==6){i("Enter all 6 PIN digits");return}}else if(!d){i("Password is required");return}h(!0);try{r?await j(c.trim(),l.join("")):await p(c.trim(),d),y("/")}catch(t){i((t==null?void 0:t.message)||"Login failed. Check your credentials.")}finally{h(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 py-10 bg-navy",children:[e.jsx("div",{className:"pointer-events-none fixed inset-0 bg-gradient-to-br from-sky/5 via-transparent to-purple/5"}),e.jsxs("form",{onSubmit:C,className:"game-panel w-full max-w-md p-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-sky to-accent-light flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{size:28,className:"text-white"})}),e.jsx("h1",{className:"font-heading text-cream text-2xl font-extrabold tracking-tight mb-1",children:"Welcome back"}),e.jsx("p",{className:"text-muted text-sm",children:"Sign in to ChoreQuest"})]}),f&&e.jsx("div",{className:"mb-5 p-3 rounded-lg border border-crimson/30 bg-crimson/10 text-crimson text-sm text-center",children:f}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-cream/80 text-sm font-medium mb-1.5",children:"Username"}),e.jsx("input",{type:"text",value:c,onChange:s=>N(s.target.value),placeholder:"Enter your username",autoComplete:"username",className:"field-input"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-muted text-sm",children:"Login with:"}),e.jsxs("button",{type:"button",onClick:()=>{w(!r),i("")},className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:`relative w-10 h-5 rounded-full transition-colors ${r?"bg-sky/30 border border-sky/40":"bg-navy border border-border"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full transition-all ${r?"left-5 bg-sky":"left-0.5 bg-muted/60"}`})}),e.jsx("span",{className:`font-medium ${r?"text-sky":"text-muted"}`,children:r?"PIN":"Password"})]})]}),!r&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-cream/80 text-sm font-medium mb-1.5",children:"Password"}),e.jsx("input",{type:"password",value:d,onChange:s=>v(s.target.value),placeholder:"Enter your password",autoComplete:"current-password",className:"field-input"})]}),r&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-cream/80 text-sm font-medium mb-1.5",children:"PIN Code"}),e.jsx("div",{className:"flex gap-2 justify-center",onPaste:P,children:l.map((s,t)=>e.jsx("input",{ref:n=>m.current[t]=n,type:"text",inputMode:"numeric",maxLength:1,value:s,onChange:n=>k(t,n.target.value),onKeyDown:n=>S(t,n),className:"w-11 h-13 text-center text-xl bg-navy border border-border text-sky rounded-lg font-bold focus:border-sky focus:outline-none focus:ring-2 focus:ring-sky/20 transition-all"},t))})]}),e.jsx("button",{type:"submit",disabled:u,className:`game-btn game-btn-blue w-full text-base ${u?"opacity-60 cursor-wait":""}`,children:u?"Signing in...":"Sign In"}),e.jsxs("p",{className:"text-center mt-6 text-muted text-sm",children:["New here?"," ",e.jsx(U,{to:"/register",className:"text-sky hover:text-accent-light font-medium transition-colors",children:"Create an account"})]})]})]})}export{q as default};
